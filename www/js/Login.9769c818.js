(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{2004:function(e,t,a){},"28a5":function(e,t,a){a("214f")("split",2,function(e,t,n){"use strict";var s=a("aae3"),i=n,o=[].push,r="split",c="length",u="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[c]||2!="ab"[r](/(?:ab)*/)[c]||4!="."[r](/(.?)(.?)/)[c]||"."[r](/()()/)[c]>1||""[r](/.?/)[c]){var l=void 0===/()??/.exec("")[1];n=function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!s(e))return i.call(a,e,t);var n,r,d,p,h,m=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,f=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,g+"g");l||(n=new RegExp("^"+b.source+"$(?!\\s)",g));while(r=b.exec(a)){if(d=r.index+r[0][c],d>v&&(m.push(a.slice(v,r.index)),!l&&r[c]>1&&r[0].replace(n,function(){for(h=1;h<arguments[c]-2;h++)void 0===arguments[h]&&(r[h]=void 0)}),r[c]>1&&r.index<a[c]&&o.apply(m,r.slice(1)),p=r[0][c],v=d,m[c]>=f))break;b[u]===r.index&&b[u]++}return v===a[c]?!p&&b.test("")||m.push(""):m.push(a.slice(v)),m[c]>f?m.slice(0,f):m}}else"0"[r](void 0,0)[c]&&(n=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(a,s){var i=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,i,s):n.call(String(i),a,s)},n]})},"5e18":function(e,t,a){"use strict";var n=a("2004"),s=a.n(n);s.a},"640f":function(e,t,a){},a55b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"wrapper"},[a("h3",[e._v("Login")]),a("div",{staticClass:"logo-login"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasUpdate,expression:"hasUpdate"}]},[a("font-awesome-icon",{attrs:{icon:"user"}}),a("mt-field",{staticClass:"user-id",attrs:{placeholder:"User Id",type:"text"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),a("font-awesome-icon",{attrs:{icon:"key"}}),a("mt-field",{attrs:{placeholder:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("mt-button",{attrs:{type:"primary",size:"large"},on:{click:e.onLogin}},[e._v("Login("+e._s(e.version)+")")])],1),a("div",[a("mt-button",{directives:[{name:"show",rawName:"v-show",value:!e.hasUpdate,expression:"!hasUpdate"}],attrs:{type:"primary",size:"large"},on:{click:e.onUpdate}},[e._v(e._s(e.updateTitle))])],1)])])},s=[],i=(a("aef6"),a("28a5"),a("6b54"),a("cadf"),a("551c"),a("097d"),a("bc3a")),o=a.n(i),r=a("ed08"),c=a("ac02"),u={name:"Login",data:function(){return{userId:"",password:"",hasUpdate:!1,updateUrl:"",updateTitle:"Checking new version ...",version:"2.2.0"}},methods:{login:function(e,t,a){var n=this,s="",i=t;0==a.length&&(a=r["a"].getTicks().toString(),i=r["a"].encryptPassword(a,t)),this.$showLoading(),c["a"].Login(e,i,a,s).then(function(o){if(o.data.OK){n.$closeLoading(),r["a"].setRemeberMe(e,i,a);var u=r["a"].getJobNumber(),l=o.data.Result,d={UsrAccountPK:l.UsrAccountPK,FirstName:l.FirstName,LastName:l.LastName,CurrentDateTime:l.CurrentDateTime,MinDateTime:l.MinDateTime,MaxDateTime:l.MaxDateTime,IsCompanyManager:l.IsCompanyManager,IsDivisionManager:l.IsDivisionManager,IsRegionManager:l.IsRegionManager,IsJobManager:l.IsJobManager,SearchJobNumber:u,SearchDateTime:l.CurrentDateTime,SearchRegionPK:"",SearchRegionName:""};r["a"].setUserToken(e,i,a,""),u?(r["a"].setUserSettings(d),n.$router.push({name:"JobTimesheetList"})):n.$prompt("Please input job number").then(function(e){var t=e.value;e.action;r["a"].setJobNumber(t),d.SearchJobNumber=t,r["a"].setUserSettings(d),n.$router.push({name:"JobTimesheetList"})}).catch(function(e){r["a"].setUserSettings(d),n.$router.push({name:"JobTimesheetList"})})}else c["a"].LoginByEmployee("","","",e,t,s).then(function(s){if(n.$closeLoading(),s.data.OK){r["a"].setRemeberMe(e,t,a);var i=s.data.Result,o={IsEmployee:!0,HREmployeePK:i.HREmployeePK,FirstName:i.FirstName,LastName:i.LastName,CurrentDateTime:i.CurrentDateTime,MinDateTime:i.MinDateTime,MaxDateTime:i.MaxDateTime};r["a"].setUserToken(i.UserId,i.Password,i.Ticks,i.Secret),r["a"].setUserSettings(o),n.$router.push({name:"EmployeeTimesheetList"})}else n.$message({message:s.data.Error,type:"error"}),console.log(s.data.Error)}).catch(function(e){n.$closeLoading(),n.showNetworkError(),console.log(e)})}).catch(function(e){n.$closeLoading(),n.showNetworkError(),console.log(e)})},checkUserInput:function(){return this.userId?!!this.password||(this.$alert("The password can not be empty.","Warning"),!1):(this.$alert("The user id can not be empty.","Warning"),!1)},onLogin:function(){this.checkUserInput()&&this.login(this.userId,this.password,"")},checkVersion:function(){var e=this,t="https://raw.githubusercontent.com/chulaiguo/Certificate/master/ios/Enterprise/GitHubTest/RCHubBeta.plist";o.a.get(t).then(function(t){for(var a="",n=t.data.split(/\r\n|[\r\n]/),s=0;s<n.length;s++){var i=n[s];if(i.endsWith("<key>bundle-version</key>")&&s+1<n.length){var o=n[s+1].indexOf("<string>");a=n[s+1].substring(o+8,o+8+5),console.log(a)}}if(a.length>0&&a!=e.version){var c=navigator.userAgent,u=c.indexOf("Android")>-1||c.indexOf("Linux")>-1||c.indexOf("Chrome")>-1;u?(console.log("android"),e.updateUrl="http://web.apvia.org.cn/download.html",e.updateTitle="Update V".concat(e.version," to V").concat(a)):(console.log("ios"),e.updateUrl="http://web.apvia.org.cn/download.html",e.updateTitle="Update V".concat(e.version," to V").concat(a))}else{e.hasUpdate=!0;var l=r["a"].getRemeberMe();l.UserId.length>0&&e.login(l.UserId,l.Password,l.Ticks)}}).catch(function(t){console.log(t),e.$alert(t)})},onUpdate:function(){window.location.href=this.updateUrl}},mounted:function(){this.checkVersion()}},l=u,d=(a("5e18"),a("dac8"),a("2877")),p=Object(d["a"])(l,n,s,!1,null,"4209e4f3",null);p.options.__file="Login.vue";t["default"]=p.exports},dac8:function(e,t,a){"use strict";var n=a("640f"),s=a.n(n);s.a}}]);
//# sourceMappingURL=Login.9769c818.js.map