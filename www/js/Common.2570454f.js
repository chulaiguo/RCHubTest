(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"013f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",[s("q-page-container",[s("q-page",{staticClass:"flex flex-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.appUpdater.isLatest,expression:"appUpdater.isLatest"}]},[s("q-form",{on:{submit:t.onLogin}},[s("div",{staticClass:"logo"}),s("q-input",{attrs:{dark:"",color:"orange-11",label:"User Id",rules:[function(t){return t&&t.length>0||"Please input your user id"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"person"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.name=""}}})]},proxy:!0}]),model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),s("q-input",{attrs:{dark:"",color:"orange-11",label:"Password",type:t.isPassword?"password":"text",rules:[function(t){return t&&t.length>0||"Please input your password"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{attrs:{name:t.isPassword?"visibility_off":"visibility",lass:"cursor-pointer"},on:{click:function(e){t.isPassword=!t.isPassword}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("q-toggle",{attrs:{dark:"",color:"brown-4",label:"Remeber Me"},model:{value:t.rememberMe,callback:function(e){t.rememberMe=e},expression:"rememberMe"}}),s("div",[s("q-btn",{staticClass:"full-width",attrs:{label:"Login",type:"submit",color:"brand"}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.dlgJobNumber.show,callback:function(e){t.$set(t.dlgJobNumber,"show",e)},expression:"dlgJobNumber.show"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Job Number")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.dlgJobNumber.jobNumber,callback:function(e){t.$set(t.dlgJobNumber,"jobNumber",e)},expression:"dlgJobNumber.jobNumber"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"OK"},on:{click:t.onJobNumber}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.appUpdater.isLatest,expression:"!appUpdater.isLatest"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.appUpdater.isAndroid,expression:"appUpdater.isAndroid"}],staticStyle:{"text-align":"center"}},[s("h5",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.appUpdater.updateTitle))]),s("q-linear-progress",{staticStyle:{height:"20px"},attrs:{value:t.appUpdater.downloadProcessValue/100,rounded:""}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"white","text-color":"accent",label:t.appUpdater.downloadProcessValue+"%"}})],1)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.appUpdater.isAndroid,expression:"!appUpdater.isAndroid"}],staticStyle:{"text-align":"center"}},[s("h5",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.appUpdater.updateTitle))]),s("q-linear-progress",{staticStyle:{height:"20px"},attrs:{value:t.appUpdater.downloadProcessValue/100,rounded:""}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"white","text-color":"accent",label:t.appUpdater.downloadProcessValue+"%"}})],1)])],1)]),s("div",{staticClass:"version"},[s("p",[t._v(t._s("Version: "+t.appUpdater.version))])])],1)],1)],1)},i=[],o=s("bc3a"),n=s.n(o),r=s("2c75");class l{static Login(t,e,s){const a={userId:t,password:e,ticks:s};return r["a"].post("BizLogin_Login",a)}}var c=s("06d6"),p=s("d257"),u=s("df98"),d=s("2b0e"),h=d["a"].extend({name:"Login",data(){return{userId:"HLeal",password:"hello4401",isPassword:!0,rememberMe:!0,dlgJobNumber:{show:!1,jobNumber:""},appUpdater:{isLatest:!1,isAndroid:!1,updateTitle:"Checking new version ...",updateBaseUrl:"https://rciupdatetest.azurewebsites.net/RCAppsHome",appName:"RCHub",version:"3.0.0",downloadProcessValue:0}}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onLogin(){let t=this.userId,e=this.password;this.login(t,e)},login(t,e){this.$q.loading.show();const s=p["a"].getTicks().toString();let a="";e.length>0&&(a=p["a"].encryptPassword(s,e.toLowerCase())),l.Login(t,a,s).then(t=>{if(this.$q.loading.hide(),t.data.ok){p["a"].setAuthorization(t.data.authorization),this.rememberMe?p["a"].setRemeberMe(t.data.authorization):p["a"].clearRemeberMe();const e={isEmployee:t.data.isEmployee,employeePK:t.data.employeePK,accountPK:t.data.accountPK,fullName:t.data.fullName,currentTime:t.data.currentTime,minDateTime:t.data.minDateTime,maxDateTime:t.data.maxDateTime,isCompanyManager:t.data.isCompanyManager,isDivisionManager:t.data.isDivisionManager,isRegionManager:t.data.isRegionManager,isJobManager:t.data.isRegionManager,searchJobNumber:"",searchDateTime:t.data.currentTime,searchRegionPK:"",searchRegionName:""},s=p["a"].getJobNumber();e.searchJobNumber=s,u["a"].save(e),e.isEmployee?this.$router.push({path:"/EmployeeTimesheetList"}):s?this.$router.push({path:"/JobTimesheetList"}):this.dlgJobNumber.show=!0}else this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})},onJobNumber(){this.$q.loading.show(),c["a"].GetJob(this.dlgJobNumber.jobNumber).then(t=>{if(this.$q.loading.hide(),t.data.ok){this.dlgJobNumber.show=!1,p["a"].setJobNumber(t.data.jobNumber);const e=u["a"].load();e.searchJobNumber=t.data.jobNumber,u["a"].save(e),this.$router.push({path:"/JobTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})},autoLogin(){p["a"].hasAuthorization()&&this.login("","")},checkVersion(t){this.$q.platform.is.android?this.appUpdater.isAndroid=!0:this.appUpdater.isAndroid=!1,this.appUpdater.isAndroid?this.checkAndroidVersion(e=>{e?this.updateApp():t()}):this.checkIOSVersion(e=>{e?this.updateApp():t()})},checkAndroidVersion(t){let e=`${this.appUpdater.updateBaseUrl}/${this.appUpdater.appName}/${this.appUpdater.appName}.txt`;n.a.get(e).then(e=>{let s=e.data.Version;s!=this.appUpdater.version?(this.appUpdater.updateTitle="Downloading new version...",t(!0)):t(!1)}).catch(t=>{this.showUpdateError(t.message)})},checkIOSVersion(t){let e=`${this.appUpdater.updateBaseUrl}/${this.appUpdater.appName}/${this.appUpdater.appName}.plist`;n.a.get(e).then(e=>{let s="";const a=e.data.split(/\r\n|[\r\n]/);for(let t=0;t<a.length;t++){const e=a[t];if(e.endsWith("<key>bundle-version</key>")&&t+1<a.length){const e=a[t+1].indexOf("<string>");s=a[t+1].substring(e+8,e+8+5)}}s.length>0&&s!=this.appUpdater.version?(this.appUpdater.updateTitle="Updating the App, please wait...",t(!0)):t(!1)}).catch(t=>{this.showUpdateError(t.message)})},updateApp(){if(this.appUpdater.isAndroid){let t=(new Date).getTime(),e=`${this.appUpdater.updateBaseUrl}/${this.appUpdater.appName}/${this.appUpdater.appName}.apk?v=${t}`;this.updateAndroid(e)}else{let t=`itms-services://?action=download-manifest&url=${this.appUpdater.updateBaseUrl}/${this.appUpdater.appName}/${this.appUpdater.appName}.plist`;this.updateIOS(t)}},updateAndroid(t){const e=this;window.resolveLocalFileSystemURL(cordova.file.externalDataDirectory,(function(s){s.getFile(`${e.appUpdater.appName}.apk`,{create:!0,exclusive:!1},(function(s){n()({method:"GET",url:t,responseType:"blob",onDownloadProgress(t){t.lengthComputable&&e.$nextTick(()=>{e.appUpdater.downloadProcessValue=Math.round(t.loaded/t.total*100)})}}).then(t=>{var e=new Blob([t.data],{type:"application/vnd.android.package-archive"});s.createWriter((function(t){t.onwriteend=function(){cordova.plugins.fileOpener2.open(s.toInternalURL(),"application/vnd.android.package-archive")},t.write(e)}))}).catch(t=>{e.showUpdateError("download error: "+t.message)})}),t=>{e.showUpdateError("error getting file! "+t.message)})}),t=>{e.showUpdateError("error getting persistent fs! "+t.code)})},updateIOS(t){cordova.InAppBrowser.open(t,"_system","location=no"),this.simulateDownloadIOS()},simulateDownloadIOS(){setTimeout(()=>{this.appUpdater.downloadProcessValue>=100?cordova.plugins.exit():(this.$nextTick(()=>{this.appUpdater.downloadProcessValue+=10}),this.simulateDownloadIOS())},1e3)},showUpdateError(t){navigator.notification.alert(t,()=>{cordova.plugins.exit()})}},mounted(){this.$q.platform.is.cordova?this.checkVersion(()=>{this.appUpdater.isLatest=!0,this.autoLogin()}):(this.appUpdater.isLatest=!0,this.autoLogin())}}),m=h,b=(s("7ce3"),s("2877")),g=Object(b["a"])(m,a,i,!1,null,"27b554e1",null);e["default"]=g.exports},"04bd":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("2c75");class i{static Create(t,e){const s={jobNumber:t,day:e};return a["a"].post("BizNightReport_Create",s)}static Delete(t){const e={pk:t};return a["a"].post("BizNightReport_Delete",e)}static GetByPK(t){const e={pk:t};return a["a"].post("BizNightReport_GetByPK",e)}static GetList(t,e){const s={jobNumber:t,day:e};return a["a"].post("BizNightReport_GetList",s)}static Insert(t){return a["a"].post("BizNightReport_Insert",t)}static Update(t){return a["a"].post("BizNightReport_Update",t)}}},"0573":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"navigate_before"},on:{click:t.onBack}}),a("q-toolbar-title",[t._v(t._s(t.title))]),a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"more_vert"},on:{click:t.onMore}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.dlgUseEquipment.show,callback:function(e){t.$set(t.dlgUseEquipment,"show",e)},expression:"dlgUseEquipment.show"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Comments")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{square:"",outlined:"",type:"textarea",dense:"",autofocus:"",rules:[function(t){return t&&t.length>0||"Please input comments"}]},model:{value:t.dlgUseEquipment.comments,callback:function(e){t.$set(t.dlgUseEquipment,"comments",e)},expression:"dlgUseEquipment.comments"}})],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Photo")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-field",{attrs:{square:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline text-center cursor-pointer",on:{click:t.onTakePhoto}},[t.dlgUseEquipment.photo.length>0?a("img",{attrs:{src:"data:image/jpeg;base64,"+t.dlgUseEquipment.photo}}):a("img",{attrs:{src:s("c746")}})])]},proxy:!0}])})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"OK"},on:{click:t.onProcess}})],1)],1)],1),a("q-page-container",[a("q-page",[a("q-form",{ref:"frmEquipmentRepair"},[a("q-input",{attrs:{square:"",outlined:"",label:"Job Number",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.entity.jobNumber,callback:function(e){t.$set(t.entity,"jobNumber",e)},expression:"entity.jobNumber"}}),a("q-input",{attrs:{square:"",outlined:"",label:"Equipment Name",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"devices"}})]},proxy:!0}]),model:{value:t.entity.equipmentName,callback:function(e){t.$set(t.entity,"equipmentName",e)},expression:"entity.equipmentName"}}),a("q-input",{attrs:{square:"",outlined:"",label:"Serial Number",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0}]),model:{value:t.entity.serialNumb,callback:function(e){t.$set(t.entity,"serialNumb",e)},expression:"entity.serialNumb"}}),a("q-input",{attrs:{square:"",outlined:"",label:"Status Name",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"flag"}})]},proxy:!0}]),model:{value:t.entity.statusName,callback:function(e){t.$set(t.entity,"statusName",e)},expression:"entity.statusName"}}),0!=t.entity.status?a("q-input",{attrs:{square:"",outlined:"",label:"Pickup Date",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"today"}})]},proxy:!0}],null,!1,2728112747),model:{value:t.entity.pickupDate,callback:function(e){t.$set(t.entity,"pickupDate",e)},expression:"entity.pickupDate"}}):t._e(),t.entity.comments.length>0?a("q-field",{attrs:{square:"",outlined:"",readonly:"",label:"Comments","stack-label":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"message"}})]},proxy:!0},{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},t._l(t.entity.comments.split(";"),(function(e){return a("div",{key:e},[a("p",[t._v(t._s(e))])])})),0)]},proxy:!0}],null,!1,501825469)}):t._e(),t.entity.actionNotes.length>0?a("q-field",{attrs:{square:"",outlined:"",readonly:"",label:"ActionNotes","stack-label":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"note"}})]},proxy:!0},{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline"},t._l(t.entity.actionNotes.split(";"),(function(e){return a("div",{key:e},[a("p",[t._v(t._s(e))])])})),0)]},proxy:!0}],null,!1,3883421563)}):t._e(),t._l(t.entity.attachedList,(function(e,s){return a("q-field",{key:s,attrs:{square:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline text-center"},[a("p",[t._v(t._s(e.fileName+"("+e.attachedPhotoSize+")"))]),a("img",{attrs:{src:"data:image/jpeg;base64,"+e.attachedPhoto}})])]},proxy:!0}],null,!0)})}))],2)],1)],1)],1)},i=[],o=s("2b0e"),n=s("d257"),r=s("6ffb"),l=o["a"].extend({name:"EquipmentRepairDetail",data(){return{title:"Equipment Repair Detail",dlgUseEquipment:{processId:0,comments:"",photo:"",show:!1},entity:{pk:"",equipmentPK:"",equipmentType:"",equipmentName:"",serialNumb:"",jobNumber:"",pickupDate:"",orderNumb:0,status:0,statusName:"",comments:"",actionNotes:"",attachedList:new Array}}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onBack(){this.$router.back()},onMore(){const t=new Array;switch(t.push({label:"PickedUp Equipment",icon:"build",id:0}),t.push({label:"Returned Equipment",icon:"done",id:1}),this.entity.status){case 0:t.splice(1,1);break;case 1:t.splice(0,1);break}this.$q.bottomSheet({actions:t}).onOk(t=>{this.dlgUseEquipment.processId=t.id,this.dlgUseEquipment.show=!0})},onTakePhoto(){n["a"].takeCameraPicture(t=>{this.dlgUseEquipment.photo=t})},onProcess(){if(this.dlgUseEquipment.comments)switch(this.dlgUseEquipment.show=!1,this.$q.loading.show(),this.dlgUseEquipment.processId){case 0:r["a"].Pickup(this.entity.pk,this.dlgUseEquipment.comments,this.dlgUseEquipment.photo).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["EquipmentRepairStore/GET_LIST"];if(e)for(let s of e)if(s.pk==t.data.entity.pk){Object.assign(s,t.data.entity);break}this.$router.push({name:"EquipmentRepairList"})}else this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)});break;case 1:r["a"].Returned(this.entity.pk,this.dlgUseEquipment.comments,this.dlgUseEquipment.photo).then(t=>{if(this.$q.loading.hide(),t.data.ok){const t=this.$store.getters["EquipmentRepairStore/GET_LIST"];if(t)for(let e=t.length-1;e>=0;e--)if(t[e].pk==this.entity.pk){t.splice(e,1);break}this.$router.push({name:"EquipmentRepairList"})}else this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)});break}else this.showError("Please input comments")}},mounted(){let t=this.$route.params.PK;this.$q.loading.show(),r["a"].GetByPK(t).then(t=>{t.data.ok?this.entity=t.data.entity:this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}}),c=l,p=s("2877"),u=Object(p["a"])(c,a,i,!1,null,"23a688a0",null);e["default"]=u.exports},"06d6":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("2c75");class i{static GetEquipmentList(t){const e={jobNumber:t};return a["a"].post("BizLookup_GetEquipmentList",e)}static GetJob(t){const e={jobNumber:t};return a["a"].post("BizLookup_GetJob",e)}static GetRegion(t){const e={jobNumber:t};return a["a"].post("BizLookup_GetRegion",e)}static GetRegionList(t){const e={regionName:t};return a["a"].post("BizLookup_GetRegionList",e)}static IsInJobSite(t,e,s){const i={jobNumber:t,latitude:e,longitude:s};return a["a"].post("BizLookup_IsInJobSite",i)}}},2448:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"navigate_before"},on:{click:t.onBack}}),s("q-toolbar-title",[t._v(t._s(t.title))]),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"done"},on:{click:t.onSave}})],1)],1),s("q-page-container",[s("q-page",[s("q-form",{ref:"frmTimesheet"},[s("q-input",{attrs:{outlined:"",label:"DateTime",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"today"}})]},proxy:!0}]),model:{value:t.entity.dateTime,callback:function(e){t.$set(t.entity,"dateTime",e)},expression:"entity.dateTime"}}),s("q-input",{attrs:{outlined:"",label:"Job Number",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.entity.jobNumber,callback:function(e){t.$set(t.entity,"jobNumber",e)},expression:"entity.jobNumber"}}),s("q-input",{attrs:{outlined:"",autofocus:"",label:"Employee#",rules:[function(t){return t&&t.length>0||"Please input empId"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.entity.empId,callback:function(e){t.$set(t.entity,"empId",e)},expression:"entity.empId"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"schedule"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"schedule"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"timer"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"timer"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}}),t.entity.photoIn.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo In("+t.entity.photoInSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photoIn}})])]},proxy:!0}],null,!1,3539155053)}):t._e(),t.entity.photoOut.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo Out("+t.entity.photoOutSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photoOut}})])]},proxy:!0}],null,!1,1089384484)}):t._e(),s("q-input",{attrs:{outlined:"",label:"Break1In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break1In,callback:function(e){t.$set(t.entity,"break1In",e)},expression:"entity.break1In"}}),s("q-input",{attrs:{outlined:"",label:"Break1Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break1Out,callback:function(e){t.$set(t.entity,"break1Out",e)},expression:"entity.break1Out"}}),s("q-input",{attrs:{outlined:"",label:"Break2In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break2In,callback:function(e){t.$set(t.entity,"break2In",e)},expression:"entity.break2In"}}),s("q-input",{attrs:{outlined:"",label:"Break2Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break2Out,callback:function(e){t.$set(t.entity,"break2Out",e)},expression:"entity.break2Out"}}),s("q-input",{attrs:{outlined:"",label:"Break3In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break3In,callback:function(e){t.$set(t.entity,"break3In",e)},expression:"entity.break3In"}}),s("q-input",{attrs:{outlined:"",label:"Break3Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break3Out,callback:function(e){t.$set(t.entity,"break3Out",e)},expression:"entity.break3Out"}}),t.isNew?t._e():s("q-btn",{staticClass:"full-width",attrs:{color:"red",icon:"delete",label:"Delete"},on:{click:t.onDelete}})],1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("b157"),r=o["a"].extend({name:"JobTimesheetDetail",data(){return{title:"Timesheet Detail",isNew:!1,entity:{pk:"",dateTime:"",postIn:"",postOut:"",checkIn:"",checkOut:"",break1In:"",break1Out:"",break2In:"",break2Out:"",break3In:"",break3Out:"",empId:"",jobNumber:"",photoIn:"",photoInSize:"",photoOut:"",photoOutSize:""}}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onBack(){this.$router.back()},onSave(){const t=this.$refs.frmTimesheet;t.validate(!0).then(t=>{t&&this.save()})},save(){this.isNew?(this.$q.loading.show(),n["a"].InsertTimeSheet(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["JobStore/GET_LIST"];e&&e.push(t.data.entity),this.$router.push({name:"JobTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.show()})):(this.$q.loading.show(),n["a"].UpdateTimeSheet(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["JobStore/GET_LIST"];if(e)for(let s of e)if(s.pk==t.data.entity.pk){Object.assign(s,t.data.entity);break}this.$router.push({name:"JobTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()}))},onDelete(){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this item?",cancel:!0,persistent:!0}).onOk(()=>{this.$q.loading.show(),n["a"].DeleteTimeSheet(this.entity.pk).then(t=>{if(this.$q.loading.hide(),t.data.ok){const t=this.$store.getters["JobStore/GET_LIST"];if(t)for(let e=t.length-1;e>=0;e--)if(t[e].pk==this.entity.pk){t.splice(e,1);break}this.$router.push({name:"JobTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})}},mounted(){let t=this.$route.params.PK;if(this.isNew=!t||"0"==t,this.isNew){let t=this.$route.params.JobNumber,e=this.$route.params.DateTime;this.$q.loading.show(),n["a"].CreateTimeSheet(t,e).then(t=>{t.data.ok?this.entity=t.data.entity:this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}else this.$q.loading.show(),n["a"].GetTimeSheet(t).then(t=>{t.data.ok?this.entity=t.data.entity:this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}}),l=r,c=s("2877"),p=Object(c["a"])(l,a,i,!1,null,"fe43fb4e",null);e["default"]=p.exports},"2c75":function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var a=s("bc3a"),i=s.n(a);i.a.defaults.timeout=1e4,i.a.defaults.baseURL="https://BOETAapitest.azurewebsites.net/api/RCHub/",i.a.interceptors.request.use((function(t){const e=sessionStorage.getItem("BOETA_RCHub_authorization")||"";return e&&(t.headers.Authorization="Basic "+e),t.url=t.url+"?access_token=71FBF94A-3F5E-4190-9251-95924D4DBBD3",t}),(function(t){return Promise.reject(t)})),i.a.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));class o{static post(t,e,s){return i.a.post(t,e,s)}}},"3f3f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),s("q-toolbar-title",[t._v(t._s(t.setting.searchRegionName))])],1)],1),s("q-footer",{attrs:{elevated:""}},[s("q-toolbar",{staticClass:"row justify-around"},[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"today"},on:{click:t.onViewByDate}}),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"business"},on:{click:t.onViewByJob}}),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"search"},on:{click:function(e){t.dlgSearch.show=!0}}})],1)],1),s("q-drawer",{ref:"drawer",attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[s("q-list",[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("JobTimesheetList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"business"}})],1),s("q-item-section",[s("q-item-label",[t._v("Job")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("EquipmentRepairList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"build"}})],1),s("q-item-section",[s("q-item-label",[t._v("Equipment Repair")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("NightReportList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"assignment"}})],1),s("q-item-section",[s("q-item-label",[t._v("Night Report")])],1)],1),s("q-separator"),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:t.onLogout}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"person"}})],1),s("q-item-section",[s("q-item-label",[t._v("Logout")])],1)],1)],1)],1),s("q-dialog",{attrs:{persistent:"",maximized:!0},model:{value:t.dlgSearch.show,callback:function(e){t.$set(t.dlgSearch,"show",e)},expression:"dlgSearch.show"}},[s("q-card",[s("q-toolbar",{staticClass:"bg-primary"},[s("q-toolbar-title",[t._v("Search Region")]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-form",[s("q-input",{attrs:{label:"Region Name"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.dlgSearch.region,callback:function(e){t.$set(t.dlgSearch,"region",e)},expression:"dlgSearch.region"}}),s("q-btn",{staticClass:"full-width",attrs:{label:"Search",color:"primary",icon:"search"},on:{click:t.onSearchRegion}})],1),s("q-list",{attrs:{bordered:"",separator:""}},t._l(t.dlgSearch.regionList,(function(e){return s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:e.regionPK,attrs:{clickable:"",dense:""},on:{click:function(s){return t.onSearchTimesheet(e.regionPK)}}},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.regionName))])],1)],1)})),1)],1)],1),s("q-page-container",[s("q-page",[s("q-tree",{attrs:{nodes:t.listLevel,accordion:"","node-key":"label"},scopedSlots:t._u([{key:"default-header",fn:function(e){return[s("div",{staticClass:"row items-center"},[s("q-icon",{attrs:{name:e.node.icon}}),e.node.isLeaf?s("div",[s("q-item",{attrs:{clickable:""}},[s("q-item-section",{on:{click:function(s){return t.onDetail(e.node.pk)}}},[s("q-item-label",[t._v(t._s(e.node.firstName+" "+e.node.lastName))]),s("q-item-label",{attrs:{caption:""}},[s("q-icon",{attrs:{name:"schedule"}}),t._v("\n                    "+t._s(e.node.postIn+" - "+e.node.postOut))],1),s("q-item-label",{attrs:{caption:""}},[s("q-icon",{attrs:{name:"timer"}}),t._v("\n                    "+t._s(e.node.checkIn+" - "+e.node.checkOut))],1)],1),s("q-item-section",{attrs:{avatar:""}})],1)],1):s("div",[t._v("\n              "+t._s(e.node.label)+"\n            ")])],1)]}}])})],1)],1)],1)},i=[],o=s("2b0e"),n=s("fd30"),r=s("06d6"),l=s("df98"),c=o["a"].extend({name:"RegionTimesheetList",data(){return{leftDrawerOpen:!1,setting:new l["a"],dlgSearch:{regionList:new Array,region:"",show:!1},viewType:0,list:new Array,listLevel:new Array}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onLogout(){sessionStorage.clear(),localStorage.clear(),this.$router.push({name:"Login"})},onNavigate(t){this.$router.push({name:t})},onDetail(t){this.$router.push({name:"RegionTimesheetDetail",params:{PK:t}})},onSearchRegion(){this.$q.loading.show(),r["a"].GetRegionList(this.dlgSearch.region).then(t=>{this.$q.loading.hide(),t.data.ok?this.dlgSearch.regionList=t.data.result:this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})},onSearchTimesheet(t){this.getList(t)},getList(t){this.$q.loading.show(),n["a"].GetTimeSheetList(t).then(t=>{this.$q.loading.hide(),t.data.ok?(this.list=t.data.list,this.$store.commit("RegionStore/SET_LIST",{list:this.list}),this.showView()):this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})},onViewByDate(){this.viewType=0,this.showView()},onViewByJob(){this.viewType=1,this.showView()},showView(){this.$q.loading.show(),0==this.viewType?this.listLevel=this.getViewByDate():this.listLevel=this.getViewByJob(),this.$q.loading.hide()},getViewByDate(){let t=new Map;for(let s of this.list){let e,a=s.dateTime;t.has(a)?e=t.get(a):(e=new Map,t.set(a,e));let i=s.jobNumber;e.has(i)?e.get(i).push(s):e.set(i,[s])}let e=[];for(let[s,a]of t){let t={label:s,icon:"today",isLeaf:!1,children:new Array};e.push(t);for(let[e,s]of a){let a={label:e,icon:"business",isLeaf:!1,children:new Array};for(let t of s)a.children.push({label:t.pk,icon:"person",isLeaf:!0,pk:t.pk,firstName:t.firstName,lastName:t.lastName,postIn:t.postIn,postOut:t.postOut,checkIn:t.checkIn,checkOut:t.checkOut});t.children.push(a)}}return e},getViewByJob(){let t=new Map;for(let s of this.list){let e,a=s.jobNumber;t.has(a)?e=t.get(a):(e=new Map,t.set(a,e));let i=s.dateTime;e.has(i)?e.get(i).push(s):e.set(i,[s])}let e=[];for(let[s,a]of t){let t={label:s,icon:"business",isLeaf:!1,children:new Array};e.push(t);for(let[e,s]of a){let a={label:e,icon:"today",isLeaf:!1,children:new Array};for(let t of s)a.children.push({label:t.pk,icon:"person",isLeaf:!0,pk:t.pk,firstName:t.firstName,lastName:t.lastName,postIn:t.postIn,postOut:t.postOut,checkIn:t.checkIn,checkOut:t.checkOut});t.children.push(a)}}return e}},mounted(){this.setting=l["a"].load();const t=this.$store.getters["RegionStore/GET_LIST"];t&&t.length>0?(this.list=t,this.showView()):this.setting.searchRegionPK?this.getList(this.setting.searchRegionPK):r["a"].GetRegion(this.setting.searchJobNumber).then(t=>{this.$q.loading.hide(),t.data.ok?(this.setting.searchRegionPK=t.data.regionPK,this.setting.searchRegionName=t.data.regionName,l["a"].save(this.setting),this.getList(this.setting.searchRegionPK)):this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})}}),p=c,u=s("2877"),d=Object(u["a"])(p,a,i,!1,null,"52b80b56",null);e["default"]=d.exports},"43fca":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"navigate_before"},on:{click:t.onBack}}),s("q-toolbar-title",[t._v(t._s(t.title))]),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"done"},on:{click:t.onSave}})],1)],1),s("q-page-container",[s("q-page",[s("q-form",{ref:"frmTimesheet"},[s("q-input",{attrs:{outlined:"",label:"DateTime",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"today"}})]},proxy:!0}]),model:{value:t.entity.dateTime,callback:function(e){t.$set(t.entity,"dateTime",e)},expression:"entity.dateTime"}}),s("q-input",{attrs:{outlined:"",label:"Job Number",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.entity.jobNumber,callback:function(e){t.$set(t.entity,"jobNumber",e)},expression:"entity.jobNumber"}}),s("q-input",{attrs:{outlined:"",label:"First Name",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.entity.firstName,callback:function(e){t.$set(t.entity,"firstName",e)},expression:"entity.firstName"}}),s("q-input",{attrs:{outlined:"",label:"Last Name",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.entity.lastName,callback:function(e){t.$set(t.entity,"lastName",e)},expression:"entity.lastName"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"schedule"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"schedule"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"timer"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}}),s("q-input",{attrs:{outlined:"",filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"timer"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"more_horiz"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"HH:mm"},model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}}),t.entity.photoIn.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo In("+t.entity.photoInSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photoIn}})])]},proxy:!0}],null,!1,3539155053)}):t._e(),t.entity.photoOut.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo Out("+t.entity.photoOutSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photoOut}})])]},proxy:!0}],null,!1,1089384484)}):t._e(),s("q-input",{attrs:{outlined:"",label:"Break1In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break1In,callback:function(e){t.$set(t.entity,"break1In",e)},expression:"entity.break1In"}}),s("q-input",{attrs:{outlined:"",label:"Break1Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break1Out,callback:function(e){t.$set(t.entity,"break1Out",e)},expression:"entity.break1Out"}}),s("q-input",{attrs:{outlined:"",label:"Break2In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break2In,callback:function(e){t.$set(t.entity,"break2In",e)},expression:"entity.break2In"}}),s("q-input",{attrs:{outlined:"",label:"Break2Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break2Out,callback:function(e){t.$set(t.entity,"break2Out",e)},expression:"entity.break2Out"}}),s("q-input",{attrs:{outlined:"",label:"Break3In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break3In,callback:function(e){t.$set(t.entity,"break3In",e)},expression:"entity.break3In"}}),s("q-input",{attrs:{outlined:"",label:"Break3Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break3Out,callback:function(e){t.$set(t.entity,"break3Out",e)},expression:"entity.break3Out"}}),s("q-btn",{staticClass:"full-width",attrs:{color:"red",icon:"delete",label:"Delete"},on:{click:t.onDelete}})],1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("fd30"),r=o["a"].extend({name:"RegionTimesheetDetail",data(){return{title:"Timesheet Detail",entity:{pk:"",dateTime:"",postIn:"",postOut:"",checkIn:"",checkOut:"",break1In:"",break1Out:"",break2In:"",break2Out:"",break3In:"",break3Out:"",firstName:"",lastName:"",jobNumber:"",photoIn:"",photoInSize:"",photoOut:"",photoOutSize:""}}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onBack(){this.$router.back()},onSave(){this.$q.loading.show(),n["a"].UpdateTimeSheet(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["RegionStore/GET_LIST"];if(e)if(t.data.isValid){for(let t=e.length-1;t>=0;t--)if(e[t].pk==this.entity.pk){e.splice(t,1);break}}else for(let s of e)if(s.pk==t.data.entity.pk){Object.assign(s,t.data.entity);break}this.$router.push({name:"RegionTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},onDelete(){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this item?",cancel:!0,persistent:!0}).onOk(()=>{this.$q.loading.show(),n["a"].DeleteTimeSheet(this.entity.pk).then(t=>{if(this.$q.loading.hide(),t.data.ok){const t=this.$store.getters["RegionStore/GET_LIST"];if(t)for(let e=t.length-1;e>=0;e--)if(t[e].pk==this.entity.pk){t.splice(e,1);break}this.$router.push({name:"RegionTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})}},mounted(){let t=this.$route.params.PK;this.$q.loading.show(),n["a"].GetTimeSheet(t).then(t=>{t.data.ok?this.entity=t.data.entity:this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}}),l=r,c=s("2877"),p=Object(c["a"])(l,a,i,!1,null,"66527aeb",null);e["default"]=p.exports},"4fd3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),a("q-toolbar-title",[t._v(t._s(t.title))]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"},on:{click:t.onAddNew}})],1)],1),a("q-drawer",{ref:"drawer",attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("JobTimesheetList")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"business"}})],1),a("q-item-section",[a("q-item-label",[t._v("Job")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("RegionTimesheetList")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"location_city"}})],1),a("q-item-section",[a("q-item-label",[t._v("Region")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("NightReportList")}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"assignment"}})],1),a("q-item-section",[a("q-item-label",[t._v("Night Report")])],1)],1),a("q-separator"),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:t.onLogout}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"person"}})],1),a("q-item-section",[a("q-item-label",[t._v("Logout")])],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:"",maximized:!0},model:{value:t.dlgSearch.show,callback:function(e){t.$set(t.dlgSearch,"show",e)},expression:"dlgSearch.show"}},[a("q-card",[a("q-toolbar",{staticClass:"bg-primary"},[a("q-toolbar-title",[t._v("Search Equipment")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-form",[a("q-input",{attrs:{label:"Job Number"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.dlgSearch.jobNumber,callback:function(e){t.$set(t.dlgSearch,"jobNumber",e)},expression:"dlgSearch.jobNumber"}}),a("q-btn",{staticClass:"full-width",attrs:{label:"Search",color:"primary",icon:"search"},on:{click:t.onSearchEquipment}})],1),a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.dlgSearch.equipmentList,(function(e){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:e.pk,attrs:{clickable:"",dense:""},on:{click:function(s){return t.onUseEquipment(e.pk)}}},[a("q-item-section",[a("q-item-label",[t._v(t._s(e.equipmentName))]),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.equipmentType+" - "+e.serialNumb))])],1)],1)})),1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.dlgUseEquipment.show,callback:function(e){t.$set(t.dlgUseEquipment,"show",e)},expression:"dlgUseEquipment.show"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Comments")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{square:"",outlined:"",type:"textarea",dense:"",autofocus:"",rules:[function(t){return t&&t.length>0||"Please input comments"}]},model:{value:t.dlgUseEquipment.comments,callback:function(e){t.$set(t.dlgUseEquipment,"comments",e)},expression:"dlgUseEquipment.comments"}})],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Photo")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-field",{attrs:{square:"",outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline text-center cursor-pointer",on:{click:t.onTakePhoto}},[t.dlgUseEquipment.photo.length>0?a("img",{attrs:{src:"data:image/jpeg;base64,"+t.dlgUseEquipment.photo}}):a("img",{attrs:{src:s("c746")}})])]},proxy:!0}])})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"OK"},on:{click:t.onSubmit}})],1)],1)],1),a("q-page-container",[a("q-page",[a("q-list",{attrs:{bordered:""}},t._l(t.list,(function(e,s){return a("q-item",{key:s,attrs:{clickable:""},on:{click:function(s){return t.onDetail(e.pk)}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"business"}}),t._v("\n              "+t._s(e.jobNumber))],1),a("q-item-label",{attrs:{caption:""}},[a("q-icon",{attrs:{name:"devices"}}),t._v("\n              "+t._s(e.equipmentName+"("+e.serialNumb+") - "+e.statusName)+"\n            ")],1),a("q-item-label",{attrs:{caption:""}},[a("q-icon",{attrs:{name:"note"}}),t._v("\n              "+t._s(e.actionNotes)+"\n            ")],1)],1),a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"more_horiz",size:"xl"}})],1)],1)})),1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("d257"),r=s("6ffb"),l=s("df98"),c=s("06d6"),p=o["a"].extend({name:"EquipmentRepairList",data(){return{leftDrawerOpen:!1,title:"Equipment Repair",dlgSearch:{equipmentList:new Array,jobNumber:"",show:!1},dlgUseEquipment:{equipmentPK:"",comments:"",photo:"",show:!1},list:new Array}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onLogout(){sessionStorage.clear(),localStorage.clear(),this.$router.push({name:"Login"})},onNavigate(t){this.$router.push({name:t})},onDetail(t){this.$router.push({name:"EquipmentRepairDetail",params:{PK:t}})},onAddNew(){this.dlgSearch.show=!0},onSearchEquipment(){this.$q.loading.show(),c["a"].GetEquipmentList(this.dlgSearch.jobNumber).then(t=>{this.$q.loading.hide(),t.data.ok?this.dlgSearch.equipmentList=t.data.result:this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})},onUseEquipment(t){this.dlgUseEquipment.equipmentPK=t,this.dlgUseEquipment.show=!0},onTakePhoto(){n["a"].takeCameraPicture(t=>{this.dlgUseEquipment.photo=t})},onSubmit(){this.dlgUseEquipment.comments?(this.dlgUseEquipment.show=!1,this.$q.loading.show(),r["a"].Submit(this.dlgUseEquipment.equipmentPK,this.dlgUseEquipment.comments,this.dlgUseEquipment.photo).then(t=>{this.$q.loading.hide(),t.data.ok?this.list.push(t.data.entity):this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})):this.showError("Please input comments")},getList(){this.$q.loading.show(),r["a"].GetPendingList().then(t=>{this.$q.loading.hide(),t.data.ok?(this.list=t.data.result,this.$store.commit("EquipmentRepairStore/SET_LIST",{list:this.list})):this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})}},mounted(){const t=l["a"].load();this.dlgSearch.jobNumber=t.searchJobNumber;const e=this.$store.getters["EquipmentRepairStore/GET_LIST"];e&&e.length>0?this.list=e:this.getList()}}),u=p,d=s("2877"),h=Object(d["a"])(u,a,i,!1,null,"c4724c16",null);e["default"]=h.exports},"6ffb":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("2c75");class i{static GetByPK(t){const e={pk:t};return a["a"].post("BizEquipmentRepair_GetByPK",e)}static GetPendingList(){const t={};return a["a"].post("BizEquipmentRepair_GetPendingList",t)}static Pickup(t,e,s){const i={pk:t,comments:e,photo:s};return a["a"].post("BizEquipmentRepair_Pickup",i)}static Returned(t,e,s){const i={pk:t,comments:e,photo:s};return a["a"].post("BizEquipmentRepair_Returned",i)}static Submit(t,e,s){const i={equipmentPK:t,comments:e,photo:s};return a["a"].post("BizEquipmentRepair_Submit",i)}}},7498:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),s("q-toolbar-title",[t._v(t._s(t.setting.fullName))]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"},on:{click:t.onAddNew}})],1)],1),s("q-drawer",{ref:"drawer",attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[s("q-list",[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:t.onLogout}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"person"}})],1),s("q-item-section",[s("q-item-label",[t._v("Logout")])],1)],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.dlgJobNumber.show,callback:function(e){t.$set(t.dlgJobNumber,"show",e)},expression:"dlgJobNumber.show"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Job Number")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.dlgJobNumber.jobNumber,callback:function(e){t.$set(t.dlgJobNumber,"jobNumber",e)},expression:"dlgJobNumber.jobNumber"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"},on:{click:t.onJobNumber}})],1)],1)],1),s("q-page-container",[s("q-page",[s("q-list",{attrs:{bordered:""}},t._l(t.list,(function(e,a){return s("q-item",{key:a},[s("q-item-section",{on:{click:function(s){return t.onDetail(e.pk)}}},[s("q-item-label",[s("q-icon",{attrs:{name:"today"}}),t._v("\n              "+t._s(e.dateTime)+"\n              "),s("q-icon",{attrs:{name:"business"}}),t._v("\n              "+t._s(e.jobNumber)+"\n            ")],1),s("q-item-label",{attrs:{caption:""}},[s("q-icon",{attrs:{name:"schedule"}}),t._v("\n              "+t._s(e.postIn+" - "+e.postOut))],1),s("q-item-label",{attrs:{caption:""}},[s("q-icon",{attrs:{name:"timer"}}),t._v("\n              "+t._s(e.checkIn+" - "+e.checkOut))],1)],1),s("q-item-section",{attrs:{avatar:""}},[s("div",[s("q-icon",{attrs:{name:"access_time",size:"xl"},on:{click:function(e){return t.onCheckInOut(a)}}}),s("q-icon",{attrs:{name:t.getBreakIcon(e.isBreakOut),size:"xl"},on:{click:function(e){return t.OnBreak(a)}}}),s("q-icon",{attrs:{name:t.getStatusIcon(e.status),size:"xl"},on:{click:function(e){return t.onStatus(a)}}})],1)])],1)})),1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("d257"),r=s("c537"),l=s("06d6"),c=s("df98"),p=o["a"].extend({name:"EmployeeTimesheetList",data(){return{leftDrawerOpen:!1,setting:new c["a"],dlgJobNumber:{show:!1,jobNumber:""},watchGPSID:0,list:new Array}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onLogout(){sessionStorage.clear(),localStorage.clear(),this.$router.push({name:"Login"})},onAddNew(){this.dlgJobNumber.show=!0},onJobNumber(){this.dlgJobNumber.jobNumber&&(this.$q.loading.show(),this.getGPSPosition((t,e)=>{l["a"].IsInJobSite(this.dlgJobNumber.jobNumber,t,e).then(t=>{this.$q.loading.hide(),t.data.ok?n["a"].takeCameraPicture(t=>{this.$store.commit("EmployeeStore/SET_PHOTO",{photo:t}),this.$router.push({name:"EmployeeTimesheetDetail",params:{PK:"0",EmployeePK:this.setting.employeePK,JobNumber:this.dlgJobNumber.jobNumber}})}):this.showError("You are not near by the job site.")}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}))},onDetail(t){this.$router.push({name:"EmployeeTimesheetDetail",params:{PK:t}})},getList(){this.$q.loading.show(),r["a"].GetTimeSheetList(this.setting.employeePK,this.setting.currentTime,this.setting.maxDateTime).then(t=>{this.$q.loading.hide(),t.data.ok?(this.list=t.data.list,this.$store.commit("EmployeeStore/SET_LIST",{list:this.list})):this.showError(t.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)})},getStatusIcon(t){switch(t){case"Empty":return"schedule";case"Work":return"work";case"Sick":return"local_hospital";case"Vacation":return"local_airport";case"Absent":return"work_off";case"Terminate":return"block";default:return"schedule"}},getBreakIcon(t){return t?"local_cafe":"computer"},onCheckInOut(t){let e=this.list[t];this.$q.loading.show(),this.getGPSPosition((s,a)=>{l["a"].IsInJobSite(e.jobNumber,s,a).then(e=>{this.$q.loading.hide(),e.data.ok?this.checkInOut(t):this.showError("You are not near by the job site.")}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})},getGPSPosition(t){try{this.watchGPSID=navigator.geolocation.watchPosition(e=>{this.$q.platform.is.ios&&e.coords.accuracy>30||(navigator.geolocation.clearWatch(this.watchGPSID),t(e.coords.latitude,e.coords.longitude))},t=>{this.$q.loading.hide(),this.showError("The location service must be enabled.("+t.message+")")},{maximumAge:6e4,timeout:3e4,enableHighAccuracy:!0})}catch(e){this.showError(e.message)}},checkInOut(t){n["a"].takeCameraPicture(e=>{this.$q.loading.show();let s=this.list[t];r["a"].Clock(s.pk,e).then(t=>{if(t.data.ok){let e=t.data.entity;Object.assign(s,e)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})},OnBreak(t){let e=this.list[t];this.$q.loading.show(),r["a"].Break(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},onStatus(t){let e=this.list[t];const s=new Array;switch(s.push({label:"Mark As Sick",icon:"local_hospital",method:this.markAsSick,index:t}),s.push({label:"Mark As Vacation",icon:"local_airport",method:this.markAsVacation,index:t}),s.push({label:"Mark As Work",icon:"work",method:this.markAsWork,index:t}),s.push({label:"Mark As Absent",icon:"work_off",method:this.markAsAbsent,index:t}),s.push({label:"Mark As Terminate",icon:"block",method:this.markAsTerminate,index:t}),e.status){case"Work":s.splice(2,1);break;case"Sick":s.splice(0,1);break;case"Vacation":s.splice(1,1);break;case"Absent":s.splice(3,1);break;case"Terminate":s.splice(4,1);break}this.$q.bottomSheet({actions:s}).onOk(t=>{t.method(t.index)})},markAsSick(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsSick(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsVacation(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsVacation(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsWork(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsWork(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsAbsent(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsAbsent(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsTerminate(t){this.$q.dialog({title:"Terminate",message:"Please input reason",prompt:{model:"",type:"text"},persistent:!0}).onOk(e=>{this.$q.loading.show();let s=this.list[t];r["a"].MarkAsTerminate(s.pk,e).then(t=>{if(t.data.ok){let e=t.data.entity;Object.assign(s,e)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})}},mounted(){this.setting=c["a"].load();const t=this.$store.getters["EmployeeStore/GET_LIST"];t&&t.length>0?this.list=t:this.getList()}}),u=p,d=s("2877"),h=Object(d["a"])(u,a,i,!1,null,"2d031077",null);e["default"]=h.exports},"7ce3":function(t,e,s){"use strict";var a=s("831a"),i=s.n(a);i.a},"831a":function(t,e,s){},"9d8e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"navigate_before"},on:{click:t.onBack}}),s("q-toolbar-title",[t._v(t._s(t.title))]),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"done"},on:{click:t.onSave}})],1)],1),s("q-page-container",[s("q-page",[s("q-form",{ref:"frmTimesheet"},[s("q-input",{attrs:{outlined:"",label:"DateTime",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"today"}})]},proxy:!0}]),model:{value:t.entity.dateTime,callback:function(e){t.$set(t.entity,"dateTime",e)},expression:"entity.dateTime"}}),s("q-input",{attrs:{outlined:"",autofocus:"",label:"Job#",rules:[function(t){return t&&t.length>0||"Please input job number"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.entity.jobNumber,callback:function(e){t.$set(t.entity,"jobNumber",e)},expression:"entity.jobNumber"}}),s("q-input",{attrs:{outlined:"",label:"PostIn",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"schedule"}})]},proxy:!0}]),model:{value:t.entity.postIn,callback:function(e){t.$set(t.entity,"postIn",e)},expression:"entity.postIn"}}),s("q-input",{attrs:{outlined:"",label:"PostOut",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"schedule"}})]},proxy:!0}]),model:{value:t.entity.postOut,callback:function(e){t.$set(t.entity,"postOut",e)},expression:"entity.postOut"}}),s("q-input",{attrs:{outlined:"",label:"CheckIn",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"timer"}})]},proxy:!0}]),model:{value:t.entity.checkIn,callback:function(e){t.$set(t.entity,"checkIn",e)},expression:"entity.checkIn"}}),s("q-input",{attrs:{outlined:"",label:"CheckOut",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"timer"}})]},proxy:!0}]),model:{value:t.entity.checkOut,callback:function(e){t.$set(t.entity,"checkOut",e)},expression:"entity.checkOut"}}),t.entity.photoIn.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo In("+t.entity.photoInSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photoIn}})])]},proxy:!0}],null,!1,3539155053)}):t._e(),t.entity.photoOut.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo Out("+t.entity.photoOutSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photoOut}})])]},proxy:!0}],null,!1,1089384484)}):t._e(),s("q-input",{attrs:{outlined:"",label:"Break1In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break1In,callback:function(e){t.$set(t.entity,"break1In",e)},expression:"entity.break1In"}}),s("q-input",{attrs:{outlined:"",label:"Break1Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break1Out,callback:function(e){t.$set(t.entity,"break1Out",e)},expression:"entity.break1Out"}}),s("q-input",{attrs:{outlined:"",label:"Break2In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break2In,callback:function(e){t.$set(t.entity,"break2In",e)},expression:"entity.break2In"}}),s("q-input",{attrs:{outlined:"",label:"Break2Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break2Out,callback:function(e){t.$set(t.entity,"break2Out",e)},expression:"entity.break2Out"}}),s("q-input",{attrs:{outlined:"",label:"Break3In",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_cafe"}})]},proxy:!0}]),model:{value:t.entity.break3In,callback:function(e){t.$set(t.entity,"break3In",e)},expression:"entity.break3In"}}),s("q-input",{attrs:{outlined:"",label:"Break3Out",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"computer"}})]},proxy:!0}]),model:{value:t.entity.break3Out,callback:function(e){t.$set(t.entity,"break3Out",e)},expression:"entity.break3Out"}}),t.isNew?t._e():s("q-btn",{staticClass:"full-width",attrs:{color:"red",icon:"delete",label:"Delete"},on:{click:t.onDelete}})],1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("c537"),r=o["a"].extend({name:"EmployeeTimesheetDetail",data(){return{title:"Timesheet Detail",isNew:!1,entity:{pk:"",dateTime:"",postIn:"",postOut:"",checkIn:"",checkOut:"",break1In:"",break1Out:"",break2In:"",break2Out:"",break3In:"",break3Out:"",employeePK:"",jobNumber:"",photoIn:"",photoInSize:"",photoOut:"",photoOutSize:""}}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onBack(){this.$router.back()},onSave(){const t=this.$refs.frmTimesheet;t.validate(!0).then(t=>{t&&this.save()})},save(){this.isNew?(this.$q.loading.show(),n["a"].InsertTimeSheet(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["EmployeeStore/GET_LIST"];e&&e.push(t.data.entity),this.$router.push({name:"EmployeeTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.show()})):(this.$q.loading.show(),n["a"].UpdateTimeSheet(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["EmployeeStore/GET_LIST"];if(e)for(let s of e)if(s.pk==t.data.entity.pk){Object.assign(s,t.data.entity);break}this.$router.push({name:"EmployeeTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()}))},onDelete(){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this item?",cancel:!0,persistent:!0}).onOk(()=>{this.$q.loading.show(),n["a"].DeleteTimeSheet(this.entity.pk).then(t=>{if(this.$q.loading.hide(),t.data.ok){const t=this.$store.getters["EmployeeStore/GET_LIST"];if(t)for(let e=t.length-1;e>=0;e--)if(t[e].pk==this.entity.pk){t.splice(e,1);break}this.$router.push({name:"EmployeeTimesheetList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})}},mounted(){let t=this.$route.params.PK;if(this.isNew=!t||"0"==t,this.isNew){const t=this.$route.params.EmployeePK,e=this.$route.params.JobNumber;this.$q.loading.show(),n["a"].CreateTimeSheet(t).then(t=>{t.data.ok?(this.entity=t.data.entity,this.entity.jobNumber=e,this.entity.photoIn=this.$store.getters["EmployeeStore/GET_PHOTO"],this.$store.commit("EmployeeStore/SET_PHOTO",{photo:""}),this.entity.photoInSize="6k"):this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}else this.$q.loading.show(),n["a"].GetTimeSheet(t).then(t=>{t.data.ok?this.entity=t.data.entity:this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}}),l=r,c=s("2877"),p=Object(c["a"])(l,a,i,!1,null,"4a6a769c",null);e["default"]=p.exports},a6a0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),s("q-toolbar-title",[t._v(t._s(t.setting.searchJobNumber+" / "+t.setting.searchDateTime))]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"},on:{click:t.onAddNew}})],1)],1),s("q-footer",{attrs:{elevated:""}},[s("q-toolbar",[s("q-toolbar-title",{staticClass:"text-center"},[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"search"},on:{click:function(e){t.dlgSearch.show=!0}}})],1)],1)],1),s("q-drawer",{ref:"drawer",attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[s("q-list",[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("JobTimesheetList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"business"}})],1),s("q-item-section",[s("q-item-label",[t._v("Job")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("RegionTimesheetList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"location_city"}})],1),s("q-item-section",[s("q-item-label",[t._v("Region")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("EquipmentRepairList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"build"}})],1),s("q-item-section",[s("q-item-label",[t._v("Equipment Repair")])],1)],1),s("q-separator"),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:t.onLogout}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"person"}})],1),s("q-item-section",[s("q-item-label",[t._v("Logout")])],1)],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.dlgSearch.show,callback:function(e){t.$set(t.dlgSearch,"show",e)},expression:"dlgSearch.show"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Job Number")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.dlgSearch.jobNumber,callback:function(e){t.$set(t.dlgSearch,"jobNumber",e)},expression:"dlgSearch.jobNumber"}})],1),s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("DateTime")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{options:t.onCheckDateRange,mask:"MM/DD/YYYY"},model:{value:t.dlgSearch.date,callback:function(e){t.$set(t.dlgSearch,"date",e)},expression:"dlgSearch.date"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.dlgSearch.date,callback:function(e){t.$set(t.dlgSearch,"date",e)},expression:"dlgSearch.date"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"},on:{click:t.onSearch}})],1)],1)],1),s("q-page-container",[s("q-page",[s("div",{staticClass:"q-gutter-md q-mt-xs q-mb-md row justify-center"},t._l(t.list,(function(e,a){return s("q-img",{key:a,staticClass:"rounded-borders cursor-pointer",staticStyle:{width:"330px"},attrs:{src:"data:image/jpeg;base64,"+e.photo,basic:""},on:{click:function(s){return t.onDetail(e.pk)}}},[s("div",{staticClass:"absolute-bottom"},[s("div",{staticClass:"text-h6"},[t._v(t._s(e.location))]),s("div",{staticClass:"text-subtitle2"},[t._v(t._s(e.notes))])])])})),1)])],1)],1)},i=[],o=s("2b0e"),n=s("d257"),r=s("04bd"),l=s("df98"),c=o["a"].extend({name:"NightReportList",data(){return{leftDrawerOpen:!1,setting:new l["a"],dlgSearch:{show:!1,jobNumber:"",date:""},list:new Array}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onLogout(){sessionStorage.clear(),localStorage.clear(),this.$router.push({name:"Login"})},onNavigate(t){this.$router.push({name:t})},onAddNew(){n["a"].takeCameraPicture(t=>{this.$store.commit("NightReportStore/SET_PHOTO",{photo:t}),this.$router.push({name:"NightReportDetail",params:{PK:"0",JobNumber:this.setting.searchJobNumber,DateTime:this.setting.searchDateTime}})})},onDetail(t){this.$router.push({name:"NightReportDetail",params:{PK:t}})},onCheckDateRange(t){return t>=this.setting.minDateTime&&t<=this.setting.maxDateTime},onSearch(){this.getList(this.dlgSearch.jobNumber,this.dlgSearch.date)},getList(t,e){t&&e&&(this.$q.loading.show(),r["a"].GetList(t,e).then(s=>{this.$q.loading.hide(),s.data.ok?(this.list=s.data.list,n["a"].setJobNumber(t),this.setting.searchJobNumber=t,this.setting.searchDateTime=e,l["a"].save(this.setting),this.$store.commit("NightReportStore/SET_LIST",{list:this.list})):this.showError(s.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)}))}},mounted(){this.setting=l["a"].load(),this.dlgSearch.jobNumber=this.setting.searchJobNumber,this.dlgSearch.date=this.setting.searchDateTime;const t=this.$store.getters["NightReportStore/GET_LIST"];t&&t.length>0?this.list=t:this.getList(this.setting.searchJobNumber,this.setting.searchDateTime)}}),p=c,u=s("2877"),d=Object(u["a"])(p,a,i,!1,null,"3ccf2566",null);e["default"]=d.exports},b157:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("2c75");class i{static Break(t){const e={pk:t};return a["a"].post("BizJob_Break",e)}static Clock(t,e){const s={pk:t,photo:e};return a["a"].post("BizJob_Clock",s)}static CreateTimeSheet(t,e){const s={jobNumber:t,day:e};return a["a"].post("BizJob_CreateTimeSheet",s)}static DeleteTimeSheet(t){const e={pk:t};return a["a"].post("BizJob_DeleteTimeSheet",e)}static GetTimeSheet(t){const e={pk:t};return a["a"].post("BizJob_GetTimeSheet",e)}static GetTimeSheetList(t,e){const s={jobNumber:t,day:e};return a["a"].post("BizJob_GetTimeSheetList",s)}static InsertTimeSheet(t){return a["a"].post("BizJob_InsertTimeSheet",t)}static MarkAsAbsent(t){const e={pk:t};return a["a"].post("BizJob_MarkAsAbsent",e)}static MarkAsSick(t){const e={pk:t};return a["a"].post("BizJob_MarkAsSick",e)}static MarkAsTerminate(t,e){const s={pk:t,reason:e};return a["a"].post("BizJob_MarkAsTerminate",s)}static MarkAsVacation(t){const e={pk:t};return a["a"].post("BizJob_MarkAsVacation",e)}static MarkAsWork(t){const e={pk:t};return a["a"].post("BizJob_MarkAsWork",e)}static UpdateTimeSheet(t){return a["a"].post("BizJob_UpdateTimeSheet",t)}}},b52c:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),s("q-toolbar-title",[t._v(t._s(t.setting.searchJobNumber+" / "+t.setting.searchDateTime))]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"add"},on:{click:t.onAddNew}})],1)],1),s("q-footer",{attrs:{elevated:""}},[s("q-toolbar",{staticClass:"row justify-around"},[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"search"},on:{click:function(e){t.dlgSearch.show=!0}}})],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.dlgSearch.show,callback:function(e){t.$set(t.dlgSearch,"show",e)},expression:"dlgSearch.show"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Job Number")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.dlgSearch.jobNumber,callback:function(e){t.$set(t.dlgSearch,"jobNumber",e)},expression:"dlgSearch.jobNumber"}})],1),s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("DateTime")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{options:t.onCheckDateRange,mask:"MM/DD/YYYY"},model:{value:t.dlgSearch.date,callback:function(e){t.$set(t.dlgSearch,"date",e)},expression:"dlgSearch.date"}},[s("div",{staticClass:"row items-center justify-end q-gutter-sm"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.dlgSearch.date,callback:function(e){t.$set(t.dlgSearch,"date",e)},expression:"dlgSearch.date"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"},on:{click:t.onSearch}})],1)],1)],1),s("q-drawer",{ref:"drawer",attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[s("q-list",[t.isRegionManager?s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("RegionTimesheetList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"location_city"}})],1),s("q-item-section",[s("q-item-label",[t._v("Region")])],1)],1):t._e(),t.isRegionManager?s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("EquipmentRepairList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"build"}})],1),s("q-item-section",[s("q-item-label",[t._v("Equipment Repair")])],1)],1):t._e(),t.isRegionManager?s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.onNavigate("NightReportList")}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"assignment"}})],1),s("q-item-section",[s("q-item-label",[t._v("Night Report")])],1)],1):t._e(),s("q-separator"),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:t.onLogout}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"person"}})],1),s("q-item-section",[s("q-item-label",[t._v("Logout")])],1)],1)],1)],1),s("q-page-container",[s("q-page",[s("q-list",{attrs:{bordered:""}},t._l(t.list,(function(e,a){return s("q-item",{key:a},[s("q-item-section",{on:{click:function(s){return t.onDetail(e.pk)}}},[s("q-item-label",[s("q-icon",{attrs:{name:"person"}}),t._v("\n              "+t._s(e.firstName+" "+e.lastName))],1),s("q-item-label",{attrs:{caption:""}},[s("q-icon",{attrs:{name:"schedule"}}),t._v("\n              "+t._s(e.postIn+" - "+e.postOut))],1),s("q-item-label",{attrs:{caption:""}},[s("q-icon",{attrs:{name:"timer"}}),t._v("\n              "+t._s(e.checkIn+" - "+e.checkOut))],1)],1),s("q-item-section",{attrs:{avatar:""}},[s("div",[s("q-icon",{attrs:{name:"access_time",size:"xl"},on:{click:function(e){return t.onCheckInOut(a)}}}),s("q-icon",{attrs:{name:t.getBreakIcon(e.isBreakOut),size:"xl"},on:{click:function(e){return t.OnBreak(a)}}}),s("q-icon",{attrs:{name:t.getStatusIcon(e.status),size:"xl"},on:{click:function(e){return t.onStatus(a)}}})],1)])],1)})),1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("d257"),r=s("b157"),l=s("df98"),c=s("06d6"),p=o["a"].extend({name:"JobTimesheetList",data(){return{leftDrawerOpen:!1,setting:new l["a"],isRegionManager:!1,watchGPSID:0,dlgSearch:{show:!1,jobNumber:"",date:""},list:new Array}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onLogout(){sessionStorage.clear(),localStorage.clear(),this.$router.push({name:"Login"})},onNavigate(t){this.$router.push({name:t})},onAddNew(){this.$router.push({name:"JobTimesheetDetail",params:{PK:"0",JobNumber:this.setting.searchJobNumber,DateTime:this.setting.searchDateTime}})},onDetail(t){this.$router.push({name:"JobTimesheetDetail",params:{PK:t}})},onCheckDateRange(t){return t>=this.setting.minDateTime&&t<=this.setting.maxDateTime},onSearch(){this.getList(this.dlgSearch.jobNumber,this.dlgSearch.date)},getList(t,e){t&&e&&(this.$q.loading.show(),r["a"].GetTimeSheetList(t,e).then(s=>{this.$q.loading.hide(),s.data.ok?(this.list=s.data.list,n["a"].setJobNumber(t),this.setting.searchJobNumber=t,this.setting.searchDateTime=e,l["a"].save(this.setting),this.$store.commit("JobStore/SET_LIST",{list:this.list})):this.showError(s.data.message)}).catch(t=>{this.$q.loading.hide(),this.showError(t.message)}))},getStatusIcon(t){switch(t){case"Empty":return"schedule";case"Work":return"work";case"Sick":return"local_hospital";case"Vacation":return"local_airport";case"Absent":return"work_off";case"Terminate":return"block";default:return"schedule"}},getBreakIcon(t){return t?"local_cafe":"computer"},onCheckInOut(t){let e=this.setting.searchJobNumber;this.$q.loading.show(),this.getGPSPosition((s,a)=>{c["a"].IsInJobSite(e,s,a).then(e=>{this.$q.loading.hide(),e.data.ok?this.checkInOut(t):this.showError("You are not near by the job site.")}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})},getGPSPosition(t){try{this.watchGPSID=navigator.geolocation.watchPosition(e=>{this.$q.platform.is.ios&&e.coords.accuracy>30||(navigator.geolocation.clearWatch(this.watchGPSID),t(e.coords.latitude,e.coords.longitude))},t=>{this.$q.loading.hide(),this.showError("The location service must be enabled.("+t.message+")")},{maximumAge:6e4,timeout:3e4,enableHighAccuracy:!0})}catch(e){this.showError(e.message)}},checkInOut(t){n["a"].takeCameraPicture(e=>{this.$q.loading.show();let s=this.list[t];r["a"].Clock(s.pk,e).then(t=>{if(t.data.ok){let e=t.data.entity;Object.assign(s,e)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})},OnBreak(t){let e=this.list[t];this.$q.loading.show(),r["a"].Break(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},onStatus(t){let e=this.list[t];const s=new Array;switch(s.push({label:"Mark As Sick",icon:"local_hospital",method:this.markAsSick,index:t}),s.push({label:"Mark As Vacation",icon:"local_airport",method:this.markAsVacation,index:t}),s.push({label:"Mark As Work",icon:"work",method:this.markAsWork,index:t}),s.push({label:"Mark As Absent",icon:"work_off",method:this.markAsAbsent,index:t}),s.push({label:"Mark As Terminate",icon:"block",method:this.markAsTerminate,index:t}),e.status){case"Work":s.splice(2,1);break;case"Sick":s.splice(0,1);break;case"Vacation":s.splice(1,1);break;case"Absent":s.splice(3,1);break;case"Terminate":s.splice(4,1);break}this.$q.bottomSheet({actions:s}).onOk(t=>{t.method(t.index)})},markAsSick(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsSick(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsVacation(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsVacation(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsWork(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsWork(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsAbsent(t){this.$q.loading.show();let e=this.list[t];r["a"].MarkAsAbsent(e.pk).then(t=>{if(t.data.ok){let s=t.data.entity;Object.assign(e,s)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})},markAsTerminate(t){this.$q.dialog({title:"Terminate",message:"Please input reason",prompt:{model:"",type:"text"},persistent:!0}).onOk(e=>{this.$q.loading.show();let s=this.list[t];r["a"].MarkAsTerminate(s.pk,e).then(t=>{if(t.data.ok){let e=t.data.entity;Object.assign(s,e)}else this.showError(t.data.message);this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})}},mounted(){this.setting=l["a"].load(),(this.setting.isCompanyManager||this.setting.isDivisionManager||this.setting.isRegionManager)&&(this.isRegionManager=!0),this.dlgSearch.jobNumber=this.setting.searchJobNumber,this.dlgSearch.date=this.setting.searchDateTime;const t=this.$store.getters["JobStore/GET_LIST"];t&&t.length>0?this.list=t:this.getList(this.setting.searchJobNumber,this.setting.searchDateTime)}}),u=p,d=s("2877"),h=Object(d["a"])(u,a,i,!1,null,"0ebcb684",null);e["default"]=h.exports},c537:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("2c75");class i{static Break(t){const e={pk:t};return a["a"].post("BizEmployee_Break",e)}static Clock(t,e){const s={pk:t,photo:e};return a["a"].post("BizEmployee_Clock",s)}static CreateTimeSheet(t){const e={employeePK:t};return a["a"].post("BizEmployee_CreateTimeSheet",e)}static DeleteTimeSheet(t){const e={pk:t};return a["a"].post("BizEmployee_DeleteTimeSheet",e)}static GetTimeSheet(t){const e={pk:t};return a["a"].post("BizEmployee_GetTimeSheet",e)}static GetTimeSheetList(t,e,s){const i={employeePK:t,begin:e,end:s};return a["a"].post("BizEmployee_GetTimeSheetList",i)}static InsertTimeSheet(t){return a["a"].post("BizEmployee_InsertTimeSheet",t)}static MarkAsAbsent(t){const e={pk:t};return a["a"].post("BizEmployee_MarkAsAbsent",e)}static MarkAsSick(t){const e={pk:t};return a["a"].post("BizEmployee_MarkAsSick",e)}static MarkAsTerminate(t,e){const s={pk:t,reason:e};return a["a"].post("BizEmployee_MarkAsTerminate",s)}static MarkAsVacation(t){const e={pk:t};return a["a"].post("BizEmployee_MarkAsVacation",e)}static MarkAsWork(t){const e={pk:t};return a["a"].post("BizEmployee_MarkAsWork",e)}static UpdateTimeSheet(t){return a["a"].post("BizEmployee_UpdateTimeSheet",t)}}},c746:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAQAAAAi5ZK2AAAWXklEQVR42u2de3wV1bXHf2vPyck7QHgUoiCIAipYRXyUYoCPlEJLqYjYizwuaiFosR9vH/deXzVce3tbrfV+rKUSHlqrtkrVtvYF1IJ+RG0Vay038hCISkReIUCAJOfMXvePc05m7z3nxATxk9HP+vIhmZlzZq+ZvWbvvdbaa08AQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEQRAEwYK6+gI+WhTywNAAFKiDWz40uKsv/CPlE6v07piOw/EeZbqUNScAyiPVwa3m48cLD/8eu7v6Fj4yPpFKJ/wr4iP1IjVGF1IBgQFkfrpw+hiD0tvcTK36ZapRz61Eoqtv5SOqn08e9K2iw1+j27mYiYCQshnBY0BtSg8+S2+00gN090/fo09gT/+JU3o/fGmAvpWuIy84xoaCOX3bmUeBjZ9wH4O/4qqKXdW6q+/pZON9+CKiRAGuKtJfVzciFigR1n+0bVN6m9u24fzmfujWtGHjsa6+q5ON6uoLOLk3c5z0bDWf8wA22nLmX4rsnVvwLWo7Cx6u46viXX1bJ52PSfcex7y0OgLVMYC/4C3jW91xTXnTL2ii2Ulnum/zdtnYMo/YXX+qFN6QP+snb3f1/Z9cPhYtvS/mDcAGHMc+7MY+HG/benP8FPN7I3HsAhqX6b4DCyz1uJideLg7D4aAzMOV2lPnJxb27eoKOMl8LJQeA/JQSgXcS/dFLy5AAXpxX/RCnioIvnU6zhjmf5fjZqsOxnQGrMfA3geC9k/GUACgUM+cdmm3rq6Ck8rHQukpuJ09YATGl2MpXUhGd85ZunOE7HZ7/AdgPSggdVry5pnnD/m4jIQdINbVF9ARNLRWCbMNphWmkAQUvqOA+s/xTag0XTNyRnZ7JLete6ttGzLS503SQyu/MW7t0uMefxL8t0g/vkOwlRbEDhLQe4D/Cx4V+NRpZdbRNxt+V6zyxmI+pmduKFvgxVS620cEARz3+2QZeHgB3439bf/RD7rqHlyTHMJbu7ry2iHCSp+I06ZiHoZTKZhj1INjdvyMwb46ysepnPOyRd5S33FbuPs/+B4AZI/UGfsJ7AexB5DPTOktMIwtHOFNeOiR3x7v6grMSWSVPgCTz9Sr1WlauW3XVSTgRteDtpxtL7vblvsc15H7YBnQ/Lb6/NJtXV2HuYioIRfHtXG9hAZxlutr/zk1q//En+gPJ4MVDdJLqiMb1Ymo0oej/jOYEBha5BhadsAlY5iR8zvAPhKYg2yUGPjqmTPMAG5nZWBC/We6uhZzEVGlXwBcF3TkQXAUCEbYYD8TRA32TIWS9bkZ0zODMJkQrFkmGaWdgIzruroWcxFRl42BAYFbFYzGrhNmetS5u+S2x6cJe3AQR7EThzjJoBi6YRCK0YM/hZKM40aWujMldFhGcA8DuroWcxFRpROgM1u2Le24UQBgdNJmZ2yGXCiht9BT/qux7f4B1VDTlhsRw7V5utzr6Q9Wo/QVaijn2TKCgG4HZMD2ElRkXfroKt3adidG7aPOhKg9OjMasYl/rjZ233bXEVdOEjUJ7MGektob1jf+hi/AHBqO7qBAhlNadhlA21E41xRFIqp0H/CUEYpxW3x7Lps5asPnd5Pz8l6s+YC8pybcdQSvxV679qHE6NhD1B+ePVq3KwPmKG+4hZHNVYio0gmZ1hbG7Uits6yBADv095K/f+j9jkpNoiZR/tzUz8S+qG7B6UHH3q4MZ7gJTEwd2cYeUeudwZwrOS1oW27UnC0F6ccwftnKjqs8RQMefn/ZSoznxzoiw233ZqhGRTa7LqIt3QP81FZQwe5IaadTBEcJAB3A/XTv0sMnktao4bH/btUN2KYXUU/OLcNw4MxOvm2ez+/qWsxFdFt6+jcAGAlMaYKkCPt/2pBirJhwZ82hE81k1SBeeWjCnWoFcU4ZbdvmZG5ke3SLiLZ0cswgttq56aNnSWNupoeLq6/ys5froQjLPaCWgbMJmOe3wkf46Uhirn999dHuPJcKwjLMq+AsfRCF7iBKRFTpnDbk7Jku14izY9/pzxL8s5qF2cr04Kvri5rLYmVrhnv99DBg92Z/9+xNycMFh5cc87T7lDTj3uPzq8C4lvJsGblwJnAi2+wjqnQNsGfFuOy0CDvt0Qid+Phh8t5weYSLMfxT6j9aJ8V66xJVkLG4FXRzrKl134I/6R88v2dbqMWvwrTbYw34d/KyzdbZEcHgOlO//cgachEd0xWUHzbb7My2bJE52kQrVu4PFUeLykZMpXVYoIahFxWY06OqAL3UMF5A68ZOXVTmts7DWLmfVtAm+zqy7QU9UMb+8MSQ6zymERc2pMIJEARK4v6a7a75NgpVZ7TchVU4C8Wg8NIGBoiKcRZWtdx1/aA+1rkaxHu3434kTYUG12c7b2FfPZpEVOkE8uyOO3PczmlNHWur7Ge9J92SRmHkGP0jrkI8KME9P70V56rkDy8f4454f4H3JD+bK2mCEbbb09uRNeQiqnQNndXfsluX0+ZbmucuabS/fwrOreDHMcUuwT3fKHMaPz63It8qowlLGpvnUku2azBTLF0ZHNnGHlGlKyjONnnhTnEaXTv4leYD9pNSgcmDvF9SRcartxWTmf8OSiAAqPB+OWeQWYqGx80H8Io50Jhp0pnZfldGdNe7RlTpSMezzGmN8CybuY8mtWGVZTrF8Nk43YlLw5Z1ajujZnbMMVxKd86wUp00yn3agKaw3KCMLDLEkOscQSu0M1RSn7khWAaD9+E39o0lqOdonmwGSM0kqcATCNTWFkmf3HO03Tm/BPyG97lnBlk92WREtqFHVeka2qO2CiWrWs3wTBDtps1LXzJLKEJVmZ6qylN7Qat0hwu3L2EAqlxPrSozS3sD/BJtznTfdjyQkF0GiSHXOQhEbq5peOrDHEf9p+wSLgEm8jXmmWYfkW2qJPU73Xdcg4l2ebvTEuypVffqLBliyHUOhj2zaoZc7bSFtrb/d7uEgdCTqbtt9gWZta7ZZSdjAdRdT7bL25aWYNvrYfvfkBHZ/j2iSgfgu+2RrVHTsegblm+0T2+BGusuTMjW0t0oX2aEV2Ntf30zaCM35Hb4wjLEkDshstnp4SwWBoBd9pm9kFfBFQTbUAvOC1aquDIycMXcitDBXeHQTG4Z0SW6SnemVsOpiWbeCr1rnzwA3pmK3OkYoD1lmN4CQZF3pv05paUwbEMwpwwx5DoHgUJDYtgNCkI1eq/93eGgi7X1QjF7GQNgq8lMZE6pURNdbJepoffaix7NtTZhGWLIdRIGc7ZOmawx3chPdXLMFaBSjw1leVBCgR2rtLSrSG7dUFqK7eTllhFdQy6i8+kqbQaF142YaqfgyAcYTa7x55qImaNm0nWWMqxrCr940JEhhtyJYQdnUpgvDWpTf7F93jvgbWZfkeUM4xicPYDAzM5SYwIVZ8vLyy0jqkRU6al4VrglhUfk9PjpGF2b4W0kPzMV4p5pB0vdeF+6e/c9xwlk8JnuC4qCEsIyxJDrJKmp1SAm7trG9voTgjq70Dr/PSTr9H47qm7OyJlbps8eeAR6/wN19jU1Q50dxOOC2YFcMsSQ6/RlKQ6PrNldLwLAJTOHhkpY786/p75tJ2G4lnxb/H29Xd4AxIdySaYE017PJSO6hlxElc5gP5xanG2pQ9t6krF2CXuh1uNwWCnsPC7uHHn624d5vV3eyDYJxnIG9yxbhhhyncee67b9Y8CdfqXLqi1P5HXoF3l1JoIfttbNqVU7ig8wYzW9aJYWw3kxusz0y+2ZvuwyokpEla6hPbsa7UnNsP2NYbv6myXsArbzOrRmm0g106nt6dp06a16HbabpfXBrv4Y5trrQLZQcVsKtBhynb0sRYHJZXrPwSy7s8xpMM0xS0jioUTyQaxNf2o5ZNnWkVsLlNYmH7QXN08GzaHBtoPHztDgylBiyHWOVDzLDcrYU6uB4gkAijHWvptW/KHZW2i2WLYeGdNat/a2ewsfaravZ4XCWBRnSnHz9OxVrRkZYsh1Eh9+mxnkxtFcW7ktaemSBUNsN2kv1tTTVK5j5wGyR3BLDqOOpj5Qb1cR04IhdEmQp+O+3cr00wMZEpHrJB482EZXtkBNkLAAEFCEmxY742gdGrbwHbQzpXYziuaOxpyK9+/UdzRscatoscc3cZH9+AVvnAn2wjKiSUSV7sP37N4xWxQebnddtXuqnbOuscr/88N6CjZTeoxmuKZXm8+dwGY9ZfnDq5wW+jnsnooq28YPG3N2KydAcuQ6C4Haef2ImUtj+/F825xBec736/CrN6mSbkEtc9gRTB9h1PItVLn8TVfaaThlEN9myjBdtsC+ILdEef1IZ2n/9SNBOCT0arFP0+L5/d3absTy/Q/cQ6PVTH4ZCXMChwAgwS+rmTS65p6a0NLHfvhif1qMT1syrFh9qhT3NYIAyetHOosCfNetCpKO3dRl46eiGcl3v/199+VhGsTxQ1W/bvlTbFDr+TQcgykf4BZs503xvyd3xpt/3FITuooSzCltXEgzUt6XPSy0l5OTvsrIGnIRVboG4Bnz20BgN4ffym5lvhTwwsZD8+5znS6gFT9uQQtex+sdu4Y4rixovJ4Xpt5EYWfXoO23+xDmmo2PEhHt3gF4ZlDGjbS7b3jKQGBQD1R7X63+kI9zDLfE4l9FNXq4zlhgp9t/P8rs7gGWiFxnSS12sKPZ9noSE3t2nIkL1d27x1fH+nRYnksFbovtHs93c2HmfXaODEN2rnxaich1+rIUB20psNTtKU1zrLe3qYCfqX/08jEneH9qypj6R/kZKqB2ZJhZcsECLLRdmY5sLx/RMd0HfAXTOw+PmhTaN3125GOqHlF1Iz/7GI52eJQlFONq0Hj/xzSI8wG7Mw/JSJ+TuQ5zj6Aia8hFtKW3R/u9pqGMAnUWr8XTXxl+U2HPDtyowim4qfArw/E0r1VnoaBDMiIdectFRFu6h9QrebO9v8meOAlPxViPBeFyb/DRR6Y9z1upYS3eydrmCQPwOXA5DTla6c3GCMAcQGyfIYuMrEcYOrKGXESVrgFShpPm5qW41rtpNYfOGYEfkK+O6icmPOk9j2OMBrQgH0AL8lEOAor8Skz3ruLiTDKj+0eCPkiGnY+f+iS6hlxElZ6aFgvs5kxVn9hfdgDgoUzNw1xuos34v/KtSFAM4CTyMATn8DCvBAoxe8FDtuh6bhnhuQEx5DqJAupQCbida/Y1JW4kPftfXUAMoHIeTaPb+2tttgzTPu+IDLNEb3NX12I7tRtF6qHWmu+BtnNcwgsO3FfzmkdT2IuR3Pi7XbYpg09Uhs/ruroWcxFRpa9H6dNcC7hJjGZSpLll/sz85SU3UhZetgjjSDBvH5RrJ2Z1TgbXdnumq2sxFxFVejPuPkY38J5sU212Lqq9GCn8uv3wK/ndsuzx2uzMT1gG8x7/hruPdXUt5iKiStfwuOLFvPH0SPgzMyx6on91wT3ipkF/SBmP5I0f8GJ0c+Qi61YACj5dk19S3jxM9WVNvo88TyultQ+wp1We1j6gjGNkbLGmrFs+8ryEytOJ9Ll5OuF7xqfKOEMrpamTMvBOfEdTw4Mt0VW5IAiCIAiCIAiCIAiCIAiCIAiC8KGJbMYm0BejYnUAQ43z9moPSTXOG6jmYR+nF5eqGaoW1QrePDzPV3p9vLr0K+BmqFoCA0VIqHHeQHUhnco7MTY2UA1UA9WFtCU9TV+K0bF52MA+1XpvMgCa4dVSAU/zzlEN3IRyTPFqibFYGXOnapxXx5mtgWqgqkM3blEzVC0AIIbpXh8vJakuojNtkZ1aPRejxsTW6ZVqkZqqf4WzYsnWO6hQ7dKD+Wfd//jDo1ej+BuYo76jr8HlPGviE2t/giq+ddn/VMVwP+bTwgeWDebPD/VvRjd+F6fys6pG71U7sAZg4nuX7wFOx6SzEi9jDS/ii9SKgjP+efjMaXS3/u/8v7RsVG/Tvz33/OhReS/hG1yMSTXjAEBhutdjvT6frqWnK/z6RzGKnuZyuljN9YdzNd++4rHumNUz+TtditXK04m8e5a839X1mI2IJka2MYEuS20kZ6lzuOrAKz1uUNce3oHXMl9gpuPeiFd/h0/jCADQ2f456i190eLln++evALF8ZsS79EkKtQA+LllNwdJlZciORseJtAAVYcDrRP6PMXjcDT+59YrqFhX0Pl4HgC00S7K0bt34jzVqC/y1mM/QG9U3PZeT7zsX4GtylyZ/Mbyb9qpF9EiopkzgEIMWlNvvtUfBPCp/AVes+yV9aCnMYjPADRUAqSS5PFWf1TDeRiCWmCxx9OoO/4FYxvL/CGYivvvf6d7Qb/VfX9dQQSUVMer498uZQIKkF+k52MVHecvlu3g1/XXepypxvAfanfTbPWceg6XxgBwKxTHdTJ1TecgcRGa+Wb6UvJ0KIAL9sbpFI55O5HQOuYDQJy5hXhRWVWPb5d2dR3mIrItXSOJGPNyXInJAJUgxscADa2JqRBIwtcKrDV5SfTiWfQ+tjP2deML8Hpsa7Lx2Be8d/1C3TS7tPiexksQp/kAJtY/yaD9VV/DsQvAY1HAP+dCjD14n/c3/Bd9VpfHVp/RnwfiXpTyosq+zYDPpGLQAFCCi0sPXsJPqVf4GI15byNAI1sfJ4+O6CI0KU6m/9AAJXls86OMg0dwdVfXYnYiq3SFGDTxOvUW30vwdiS34MJZ+CeoFwpoH6BACiBFzJoP0TVYwnGgdShV6njys7q3ujVxpXqTJm/dOHh+2ddxIwDgmSduZDCaUIKRZS1fphJezj0U67neH/wf6f/EVu+fyfHUk3/A3SieuB0PwvNYJ0mVgDAMBwfTLBTqyVRBsyv+tx74W+FV97Uu+CNd733fp5gqRQkAjmHdL+cw3JejRIfIKh0ASKkmf433d77Yb6VH+bbCWy78LappFf0DiAF5zDoGH1q9jUp+jUYyaDxvojvi25u/jO97Ffg533ze29B6OjWoZoC6zzovAfKL31p3vOVcnMO3xh5PMP+MLmt92PsHzqaVfoGaQPd591Gi9Vtqet6vOQ5Nreg2e7immJeshMaYgkTrVzCv/koARc3nfjVOvegFHxTzB88cofiY5nz0njlCsabYziVNXV2H2Yisy1aAwUV0Kq+ury1rIa1/u21jrwM4T03hV71lD9QDPdCrNxd4G5CvduMFylfLkqVql+pNbyTWrKkfepD7Y8umZ/ruxtUY4W2nlf02HBmqyngST6BL9F8bDvYajmH0vaXvDmnML6OivFdRi7haHjvuT6ClP93yvUN9iPrQm8jHC/qoGsCVNIEn8T7a0fjEiw2nNakenORd6hSaqMbitfgdfr7qp4ZSJVeiRTVzH1XJlXyZ+sere7q6HgVBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEAQhxP8DITDvJmAqnosAAAAASUVORK5CYII="},df98:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));class a{constructor(){this.isEmployee=!1,this.employeePK="",this.accountPK="",this.fullName="",this.currentTime="",this.minDateTime="",this.maxDateTime="",this.isCompanyManager=!1,this.isDivisionManager=!1,this.isRegionManager=!1,this.isJobManager=!1,this.searchJobNumber="",this.searchDateTime="",this.searchRegionPK="",this.searchRegionName=""}static save(t){sessionStorage.setItem("BOETA_RCHub_userSettings",JSON.stringify(t))}static load(){const t=sessionStorage.getItem("BOETA_RCHub_userSettings")||"";return t?JSON.parse(t):new a}}},e861:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"navigate_before"},on:{click:t.onBack}}),s("q-toolbar-title",[t._v(t._s(t.title))]),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"done"},on:{click:t.onSave}})],1)],1),s("q-page-container",[s("q-page",[s("q-form",{ref:"frmNightReport"},[s("q-input",{attrs:{outlined:"",label:"DateTime",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"today"}})]},proxy:!0}]),model:{value:t.entity.dateTime,callback:function(e){t.$set(t.entity,"dateTime",e)},expression:"entity.dateTime"}}),s("q-input",{attrs:{outlined:"",label:"Job Number",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"business"}})]},proxy:!0}]),model:{value:t.entity.jobNumber,callback:function(e){t.$set(t.entity,"jobNumber",e)},expression:"entity.jobNumber"}}),s("q-input",{attrs:{outlined:"",autofocus:"",label:"Location",rules:[function(t){return t&&t.length>0||"Please input location"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"room"}})]},proxy:!0}]),model:{value:t.entity.location,callback:function(e){t.$set(t.entity,"location",e)},expression:"entity.location"}}),s("q-input",{attrs:{outlined:"",label:"Notes",type:"textarea"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"message"}})]},proxy:!0}]),model:{value:t.entity.notes,callback:function(e){t.$set(t.entity,"notes",e)},expression:"entity.notes"}}),t.entity.photo.length>0?s("q-field",{staticClass:"text-center",attrs:{outlined:"",readonly:""},scopedSlots:t._u([{key:"control",fn:function(){return[s("div",{staticClass:"self-center full-width no-outline text-center"},[s("p",[t._v(t._s("Photo In("+t.entity.photoSize+")"))]),s("img",{attrs:{src:"data:image/jpeg;base64,"+t.entity.photo}})])]},proxy:!0}],null,!1,4043792429)}):t._e(),t.isNew?t._e():s("q-btn",{staticClass:"full-width fixed-bottom",attrs:{color:"red",icon:"delete",label:"Delete"},on:{click:t.onDelete}})],1)],1)],1)],1)},i=[],o=s("2b0e"),n=s("04bd"),r=o["a"].extend({name:"NightReportDetail",data(){return{title:"Night Report Detail",isNew:!1,entity:{pk:"",jobNumber:"",dateTime:"",location:"",notes:"",photo:"",photoSize:""}}},methods:{showError(t){this.$q.dialog({title:"Error",message:t})},onBack(){this.$router.back()},onSave(){const t=this.$refs.frmNightReport;t.validate(!0).then(t=>{t&&this.save()})},save(){this.isNew?(this.$q.loading.show(),n["a"].Insert(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["NightReportStore/GET_LIST"];e&&e.splice(0,0,t.data.entity),this.$router.push({name:"NightReportList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.show()})):(this.$q.loading.show(),n["a"].Update(this.entity).then(t=>{if(this.$q.loading.hide(),t.data.ok){const e=this.$store.getters["NightReportStore/GET_LIST"];if(e)for(let s of e)if(s.pk==t.data.entity.pk){Object.assign(s,t.data.entity);break}this.$router.push({name:"NightReportList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()}))},onDelete(){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this item?",cancel:!0,persistent:!0}).onOk(()=>{this.$q.loading.show(),n["a"].Delete(this.entity.pk).then(t=>{if(this.$q.loading.hide(),t.data.ok){const t=this.$store.getters["NightReportStore/GET_LIST"];if(t)for(let e=t.length-1;e>=0;e--)if(t[e].pk==this.entity.pk){t.splice(e,1);break}this.$router.push({name:"NightReportList"})}else this.showError(t.data.message)}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})})}},mounted(){let t=this.$route.params.PK;if(this.isNew=!t||"0"==t,this.isNew){let t=this.$route.params.JobNumber,e=this.$route.params.DateTime;this.$q.loading.show(),n["a"].Create(t,e).then(t=>{t.data.ok?(this.entity=t.data.entity,this.entity.photo=this.$store.getters["NightReportStore/GET_PHOTO"],this.$store.commit("NightReportStore/SET_PHOTO",{photo:""}),this.entity.photoSize="6k"):this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}else this.$q.loading.show(),n["a"].GetByPK(t).then(t=>{t.data.ok?this.entity=t.data.entity:this.showError(t.data.message),this.$q.loading.hide()}).catch(t=>{this.showError(t.message),this.$q.loading.hide()})}}),l=r,c=s("2877"),p=Object(c["a"])(l,a,i,!1,null,"17aec547",null);e["default"]=p.exports},fd30:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("2c75");class i{static DeleteTimeSheet(t){const e={pk:t};return a["a"].post("BizRegion_DeleteTimeSheet",e)}static GetTimeSheet(t){const e={pk:t};return a["a"].post("BizRegion_GetTimeSheet",e)}static GetTimeSheetList(t){const e={regionPK:t};return a["a"].post("BizRegion_GetTimeSheetList",e)}static UpdateTimeSheet(t){return a["a"].post("BizRegion_UpdateTimeSheet",t)}}}}]);