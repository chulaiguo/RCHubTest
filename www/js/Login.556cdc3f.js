(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login"],{"0285":function(e,t,n){"use strict";var a=n("6214"),s=n.n(a);s.a},"28a5":function(e,t,n){n("214f")("split",2,function(e,t,a){"use strict";var s=n("aae3"),i=a,r=[].push,o="split",c="length",u="lastIndex";if("c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[c]||2!="ab"[o](/(?:ab)*/)[c]||4!="."[o](/(.?)(.?)/)[c]||"."[o](/()()/)[c]>1||""[o](/.?/)[c]){var l=void 0===/()??/.exec("")[1];a=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!s(e))return i.call(n,e,t);var a,o,d,m,g,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,v=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,p+"g");l||(a=new RegExp("^"+b.source+"$(?!\\s)",p));while(o=b.exec(n)){if(d=o.index+o[0][c],d>f&&(h.push(n.slice(f,o.index)),!l&&o[c]>1&&o[0].replace(a,function(){for(g=1;g<arguments[c]-2;g++)void 0===arguments[g]&&(o[g]=void 0)}),o[c]>1&&o.index<n[c]&&r.apply(h,o.slice(1)),m=o[0][c],f=d,h[c]>=v))break;b[u]===o.index&&b[u]++}return f===n[c]?!m&&b.test("")||h.push(""):h.push(n.slice(f)),h[c]>v?h.slice(0,v):h}}else"0"[o](void 0,0)[c]&&(a=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(n,s){var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i,s):a.call(String(i),n,s)},a]})},6214:function(e,t,n){},"640f":function(e,t,n){},a55b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"wrapper"},[n("h3",[e._v("Login")]),n("div",{staticClass:"logo-login"}),n("font-awesome-icon",{attrs:{icon:"user"}}),n("mt-field",{staticClass:"user-id",attrs:{placeholder:"User Id",type:"text"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),n("font-awesome-icon",{attrs:{icon:"key"}}),n("mt-field",{attrs:{placeholder:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("mt-button",{attrs:{type:"primary",size:"large"},on:{click:e.onLogin}},[e._v("Login("+e._s(e.version)+")")])],1)])},s=[],i=(n("aef6"),n("28a5"),n("6b54"),n("cadf"),n("551c"),n("097d"),n("bc3a")),r=n.n(i),o=n("ed08"),c=n("ac02"),u={name:"Login",data:function(){return{userId:"",password:"",version:"2.1.0"}},methods:{login:function(e,t,n){var a=this,s="",i=t;0==n.length&&(n=o["a"].getTicks().toString(),i=o["a"].encryptPassword(n,t)),this.$showLoading(),c["a"].Login(e,i,n,s).then(function(r){if(r.data.OK){a.$closeLoading(),o["a"].setRemeberMe(e,i,n);var u=o["a"].getJobNumber(),l=r.data.Result,d={UsrAccountPK:l.UsrAccountPK,FirstName:l.FirstName,LastName:l.LastName,CurrentDateTime:l.CurrentDateTime,MinDateTime:l.MinDateTime,MaxDateTime:l.MaxDateTime,IsCompanyManager:l.IsCompanyManager,IsDivisionManager:l.IsDivisionManager,IsRegionManager:l.IsRegionManager,IsJobManager:l.IsJobManager,SearchJobNumber:u,SearchDateTime:l.CurrentDateTime,SearchRegionPK:"",SearchRegionName:""};o["a"].setUserToken(e,i,n,""),u?(o["a"].setUserSettings(d),a.$router.push({name:"JobTimesheetList"})):a.$prompt("Please input job number").then(function(e){var t=e.value;e.action;o["a"].setJobNumber(t),d.SearchJobNumber=t,o["a"].setUserSettings(d),a.$router.push({name:"JobTimesheetList"})}).catch(function(e){o["a"].setUserSettings(d),a.$router.push({name:"JobTimesheetList"})})}else c["a"].LoginByEmployee("","","",e,t,s).then(function(s){if(a.$closeLoading(),s.data.OK){o["a"].setRemeberMe(e,t,n);var i=s.data.Result,r={IsEmployee:!0,HREmployeePK:i.HREmployeePK,FirstName:i.FirstName,LastName:i.LastName,CurrentDateTime:i.CurrentDateTime,MinDateTime:i.MinDateTime,MaxDateTime:i.MaxDateTime};o["a"].setUserToken(i.UserId,i.Password,i.Ticks,i.Secret),o["a"].setUserSettings(r),a.$router.push({name:"EmployeeTimesheetList"})}else a.$message({message:s.data.Error,type:"error"}),console.log(s.data.Error)}).catch(function(e){a.$closeLoading(),a.showNetworkError(),console.log(e)})}).catch(function(e){a.$closeLoading(),a.showNetworkError(),console.log(e)})},checkUserInput:function(){return this.userId?!!this.password||(this.$alert("The password can not be empty.","Warning"),!1):(this.$alert("The user id can not be empty.","Warning"),!1)},onLogin:function(){this.checkUserInput()&&this.login(this.userId,this.password,"")},checkVersion:function(){var e=this,t="https://raw.githubusercontent.com/chulaiguo/Certificate/master/ios/Enterprise/GitHubTest/RCHubBeta.plist";r.a.get(t).then(function(n){for(var a="",s=n.data.split(/\r\n|[\r\n]/),i=0;i<s.length;i++){var r=s[i];if(r.endsWith("<key>bundle-version</key>")&&i+1<s.length){var o=s[i+1].indexOf("<string>");a=s[i+1].substring(o+8,o+8+5),console.log(a)}}if(a.length>0&&a!=e.version){var c=navigator.userAgent,u=c.indexOf("Android")>-1||c.indexOf("Linux")>-1||c.indexOf("Chrome")>-1;if(u){console.log("android"),e.$alert("android");var l=document.createElement("a");l.setAttribute("href",t),l.click()}else{console.log("ios"),e.$alert("ios");var d=document.createElement("a");d.setAttribute("href","itms-services://?action=download-manifest&url="+t);var m=document.createEvent("MouseEvent");m.initEvent("click",!1,!1),d.dispatchEvent(m),e.$alert("ok")}}}).catch(function(t){console.log(t),e.$alert(t)})}},mounted:function(){this.checkVersion();var e=o["a"].getRemeberMe();e.UserId.length>0&&this.login(e.UserId,e.Password,e.Ticks)}},l=u,d=(n("0285"),n("dac8"),n("2877")),m=Object(d["a"])(l,a,s,!1,null,"47e77d5d",null);m.options.__file="Login.vue";t["default"]=m.exports},dac8:function(e,t,n){"use strict";var a=n("640f"),s=n.n(a);s.a}}]);
//# sourceMappingURL=Login.556cdc3f.js.map